<!DOCTYPE html>
<html>
<head>
    <title>BPMN Modeler Example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!--<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8">-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">


    <!-- jquery -->
    <script type="text/javascript" src="./lib/jquery-1.11.1/jquery-1.11.1.min.js"></script>

    <!-- jquery ui -->
    <script type="text/javascript" src="./lib/jquery-ui-1.11.0.custom/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./lib/jquery-ui-1.11.0.custom/jquery-ui.css"/>

    <!-- jquery Context Menu -->
    <link rel="stylesheet" type="text/css" href="./lib/contextmenu/jquery.contextMenu.css"/>
    <script type="text/javascript" src="./lib/contextmenu/jquery.contextMenu-min.js"></script>

    <!-- jquery.layout -->
    <link rel="stylesheet" type="text/css" href="./layout/css/layout-default-latest.css"/>
    <script type="text/javascript" src="./layout/js/jquery.layout-latest.js"></script>

    <!-- Opengraph -->
    <!--<script type="text/javascript" src="../opengraph/OpenGraph-0.1.2-SNAPSHOT.js"></script>-->

    <script type="text/javascript" src="../src/raphael-2.1.0-custom.js"></script>
    <script type="text/javascript" src="../src/common/Constants.js"></script>
    <script type="text/javascript" src="../src/common/Util.js"></script>
    <script type="text/javascript" src="../src/common/CurveUtil.js"></script>
    <script type="text/javascript" src="../src/common/Exceptions.js"></script>
    <script type="text/javascript" src="../src/common/HashMap.js"></script>
    <script type="text/javascript" src="../src/common/JSON.js"></script>
    <script type="text/javascript" src="../src/geometry/Style.js"></script>
    <script type="text/javascript" src="../src/geometry/Coordinate.js"></script>
    <script type="text/javascript" src="../src/geometry/Envelope.js"></script>
    <script type="text/javascript" src="../src/geometry/Geometry.js"></script>
    <script type="text/javascript" src="../src/geometry/PolyLine.js"></script>
    <script type="text/javascript" src="../src/geometry/Curve.js"></script>
    <script type="text/javascript" src="../src/geometry/Ellipse.js"></script>
    <script type="text/javascript" src="../src/geometry/BezierCurve.js"></script>
    <script type="text/javascript" src="../src/geometry/Circle.js"></script>
    <script type="text/javascript" src="../src/geometry/GeometryCollection.js"></script>
    <script type="text/javascript" src="../src/geometry/Line.js"></script>
    <script type="text/javascript" src="../src/geometry/Point.js"></script>
    <script type="text/javascript" src="../src/geometry/Polygon.js"></script>
    <script type="text/javascript" src="../src/geometry/Rectangle.js"></script>

    <!--Marker-->
    <script type="text/javascript" src="../src/marker/IMarker.js"></script>
    <script type="text/javascript" src="../src/marker/RectangleMarker.js"></script>
    <script type="text/javascript" src="../src/marker/SwitchRMarker.js"></script>
    <script type="text/javascript" src="../src/marker/SwitchLMarker.js"></script>
    <script type="text/javascript" src="../src/marker/SwitchXMarker.js"></script>
    <script type="text/javascript" src="../src/marker/CircleMarker.js"></script>
    <script type="text/javascript" src="../src/marker/ArrowMarker.js"></script>

    <!--Pattern-->
    <script type="text/javascript" src="../src/pattern/IPattern.js"></script>
    <script type="text/javascript" src="../src/pattern/Hatched.js"></script>
    <script type="text/javascript" src="../src/pattern/RectPattern.js"></script>

    <!--Shape-->
    <script type="text/javascript" src="../src/shape/IShape.js"></script>
    <script type="text/javascript" src="../src/shape/GeomShape.js"></script>
    <script type="text/javascript" src="../src/shape/TextShape.js"></script>
    <script type="text/javascript" src="../src/shape/ImageShape.js"></script>
    <script type="text/javascript" src="../src/shape/EdgeShape.js"></script>
    <script type="text/javascript" src="../src/shape/CircleShape.js"></script>
    <script type="text/javascript" src="../src/shape/EllipseShape.js"></script>
    <script type="text/javascript" src="../src/shape/GroupShape.js"></script>
    <script type="text/javascript" src="../src/shape/HorizontalLaneShape.js"></script>
    <script type="text/javascript" src="../src/shape/HorizontalPoolShape.js"></script>
    <script type="text/javascript" src="../src/shape/HtmlShape.js"></script>
    <script type="text/javascript" src="../src/shape/RectangleShape.js"></script>
    <script type="text/javascript" src="../src/shape/VerticalLaneShape.js"></script>
    <script type="text/javascript" src="../src/shape/VerticalPoolShape.js"></script>
    <script type="text/javascript" src="../src/shape/Transformer.js"></script>

    <!-- BPMN -->
    <script type="text/javascript" src="../src/shape/bpmn/A_Subprocess.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_Task.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_MapperTask.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_HumanTask.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_ManualTask.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_LoopTask.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_ServiceTask.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/A_WebServiceTask.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/ParallelMultiple.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/C_Association.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/C_Conditional.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/C_DataAssociation.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/C_Message.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/C_Sequence.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/D_Data.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/D_Store.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/Event.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/Signal.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/Value_Chain.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/Value_Chain_Module.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Connector.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Cancel.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Compensation.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Error.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Link.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Message.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_End_Multiple.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Compensation.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Error.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Link.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Message.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Multiple.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Rule.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Timer.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_MessageFill.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Intermediate_Escalation.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Connector.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Error.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Link.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Message.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Multiple.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Rule.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/E_Start_Timer.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/G_Gateway.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/G_Complex.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/G_Exclusive.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/G_Inclusive.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/G_Parallel.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/M_Annotation.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/M_Group.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/M_Text.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/ScopeActivity.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/MIParallel.js"></script>
    <script type="text/javascript" src="../src/shape/bpmn/MISequential.js"></script>

    <script type="text/javascript" src="../src/renderer/IRenderer.js"></script>
    <script type="text/javascript" src="../src/renderer/RaphaelRenderer.js"></script>
    <script type="text/javascript" src="../src/handler/EventHandler.js"></script>
    <script type="text/javascript" src="../src/graph/Canvas.js"></script>

    <!-- elec -->
    <script type="text/javascript" src="../src/shape/elec/SwitchGear.js"></script>
    <script type="text/javascript" src="../src/shape/elec/WireShape.js"></script>
    <script type="text/javascript" src="../src/shape/elec/BusductShape.js"></script>
    <script type="text/javascript" src="../src/shape/elec/RacewayShape.js"></script>
    <script type="text/javascript" src="../src/shape/elec/CableShape.js"></script>
    <script type="text/javascript" src="../src/shape/elec/SwitchTransformer.js"></script>
    <script type="text/javascript" src="../src/shape/elec/Load.js"></script>
    <script type="text/javascript" src="../src/shape/elec/SHLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/NMLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/EHLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/EHSLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/MILoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/MKLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/MOLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/PKGLoad.js"></script>
    <script type="text/javascript" src="../src/shape/elec/HierarchyFeeder.js"></script>
    <script type="text/javascript" src="../src/shape/elec/HierarchyFloor.js"></script>
    <script type="text/javascript" src="../src/shape/elec/HierarchyBldg.js"></script>
    <script type="text/javascript" src="../src/shape/elec/BLDG.js"></script>
    <script type="text/javascript" src="../src/shape/elec/Location.js"></script>
    <script type="text/javascript" src="../src/shape/elec/Manhole.js"></script>
    <script type="text/javascript" src="../src/shape/component/DataTable.js"></script>

    <!--<script type="text/javascript" src="../src/worker/og-worker.js"></script>-->

    <style type="text/css">
        .ui-layout-center {
            padding: 0;
            overflow: scroll;
        }

        .ui-layout-west {
            padding: 0;
            overflow: hidden;
        }

        .ui-accordion .ui-accordion-content {
            padding: 2px;
            top: 0;
            border-top: 0;
            margin-top: 2px;
            margin-bottom: -2px;
            position: relative;
            height: 600px;
        }

        .icon_shape {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .ui-accordion-content img {
            border: none;
            overflow: hidden;
        }

        .ui-accordion-content img:hover {
            border: 2px solid blue;
            margin: -2px;
        }
    </style>

    <script type="text/javascript">
        var canvas = null, opengraphJSON, ele1;
        $(document).ready(function () {
            // layout
            $('body').layout({
                west__size: 160,
                enableCursorHotkey: false
            });
            $("#accordion").accordion({
                fillSpace: false,
                autoHeight: false
            });

            // Canvas
            //canvas = new OG.Canvas('canvas', [1000, 800], 'transparent');
            canvas = new OG.Canvas('canvas', [2000, 800], 'transparent');
            //canvas = new OG.Canvas('canvas', [1000, 800], 'white', 'url(resources/images/symbol/grid.gif)');
            canvas._CONFIG.DEFAULT_STYLE.EDGE["edge-type"] = "plain";
            canvas._CONFIG.GUIDE_CONTROL_LINE_NUM = 1;
            canvas._CONFIG.FOCUS_CANVAS_ONSELECT = true;
            canvas._CONFIG.WHEEL_SCALABLE = true;
            canvas._CONFIG.DRAG_PAGE_MOVABLE = true;

            canvas.initConfig({
                selectable: true,
                dragSelectable: true,
                movable: true,
                resizable: true,
                connectable: true,
                selfConnectable: true,
                connectCloneable: true,
                connectRequired: true,
                labelEditable: true,
                groupDropable: true,
                collapsible: true,
                enableHotKey: true,
                enableContextMenu: true,
                useSlider: false,
                stickGuide: true,
                checkBridgeEdge: true,
                autoHistory: false
            });


//            canvas.addSlider({
//                slider: $("#canvas_slider"),
//                width: 200,
//                height: 300,
//                appendTo: "body"
//            });

            $(".icon_shape").draggable({
                start: function () {
                    $('#canvas').data('DRAG_SHAPE', {
                        '_shape_type': $(this).attr('_shape_type'),
                        '_shape_id': $(this).attr('_shape_id'),
                        '_width': $(this).attr('_width'),
                        '_height': $(this).attr('_height')
                    });
                },
                helper: 'clone',
                appendTo: "#canvas"
            });
            $("#canvas").droppable({
                drop: function (event, ui) {
                    var shapeInfo = $('#canvas').data('DRAG_SHAPE'), shape, element;
                    if (shapeInfo) {
                        shape = eval('new ' + shapeInfo._shape_id + '()');
                        var dropX = event.pageX - $('#canvas').offset().left + $('#canvas')[0].scrollLeft;
                        var dropY = event.pageY - $('#canvas').offset().top + $('#canvas')[0].scrollTop;
                        dropX = dropX / canvas._CONFIG.SCALE;
                        dropY = dropY / canvas._CONFIG.SCALE;
                        element = canvas.drawShape([dropX, dropY],
                            shape, [parseInt(shapeInfo._width, 10), parseInt(shapeInfo._height, 10)]);
                        $('#canvas').removeData('DRAG_SHAPE');

                    }
                }
            });

            canvas.onDivideLane(function (event, divideLane) {
            });

            // Shape 이 처음 Draw 되었을 때의 이벤트 리스너
            canvas.onDrawShape(function (event, shapeElement) {

            });

            // Undo 되었을 때의 이벤트 리스너
            canvas.onUndo(function (event) {
            });

            // Redo 되었을 때의 이벤트 리스너
            canvas.onRedo(function (event) {
            });

            // Shape 이 Redraw 되었을 때의 이벤트 리스너
            canvas.onRedrawShape(function (event, shapeElement) {
            });

            // Shape 이 Remove 될 때의 이벤트 리스너
            canvas.onRemoveShape(function (event, shapeElement) {
            });

            // Shape 이 Move 되었을 때의 이벤트 리스너
            canvas.onMoveShape(function (event, shapeElement, offset) {
            });

            // Shape 이 Resize 되었을 때의 이벤트 리스너
            canvas.onResizeShape(function (event, shapeElement, offset) {
            });

            // Shape 이 Connect 되었을 때의 이벤트 리스너
            canvas.onConnectShape(function (event, edgeElement, fromElement, toElement) {
            });

            // Shape 이 Disconnect 되었을 때의 이벤트 리스너
            canvas.onDisconnectShape(function (event, edgeElement, fromElement, toElement) {

            });

            canvas.onLoading(function (event, progress) {

            });

//            canvas.fastLoadingON();
//
//
//            canvas.fastLoadingOFF();


            var fileInput = $('#backdoor-upload');
            fileInput.bind('change', function (event) {
                var target = event.delegateTarget;
                if (target.files && target.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        canvas.addBackDoor(e.target.result, 100, 1);
                    };
                    reader.readAsDataURL(target.files[0]);
                }
            });

            var update = $('#backdoor-update');
            update.click(function () {
                canvas.updateBackDoor(150, 0.7);
            });

            var renderer = function (value) {
                if (value && value.text) {
                    return value.text;
                }
                if (!value || !value.type || !value.value) {
                    return value;
                }

                if (value.type == 'activity') {
                    return {
                        /**
                         * 도형 shape
                         */
                        shape: new OG.A_Task(value.value),
                        'shape-position': {
                            /**
                             * 도형 가로 (number,px,%)
                             */
                            width: '80px',
                            /**
                             * 도형 세로 (number,px,%)
                             */
                            height: '38px',
                            /**
                             * 좌측으로 부터 위치값. (number,px,%)
                             */
                            left: '0',
                            /**
                             * 상단으로 부터 위치값. (number,px,%)
                             */
                            top: '0',
                            /**
                             * 우측으로 부터 위치값. (number,px,%)
                             */
                            right: '0',
                            /**
                             * 하단으로 부터 위치값. (number,px,%)
                             */
                            bottom: '0',
                            /**
                             * 가로 정렬 (left,center,right).
                             */
                            align: 'center',
                            /**
                             * 세로 정렬 (top,middle,bottom)
                             */
                            'vertical-align': 'middle'
                        },
                        /**
                         * 도형 스타일
                         */
                        'shape-style': {
                            'fill': '#fff',
                            'fill-opacity': 1,
                            'font-size': 9
                        }
                    }
                }

                if (value.type == 'doubleActivity') {
                    return {
                        shape: new OG.A_Task(value.value),
                        'shape-position': {
                            width: '80px',
                            height: '78px',
                            top: '1px',
                            align: 'center'
                        },
                        'shape-style': {
                            'fill': '#f8f8f8',
                            'fill-opacity': 1,
                            'font-size': 9
                        }
                    }
                }
                if (value.type == 'horizontalActivity') {
                    return {
                        shape: new OG.A_Task(value.value),
                        'shape-position': {
                            width: '160px',
                            height: '38px',
                            align: 'center',
                            'vertical-align': 'middle'
                        },
                        'shape-style': {
                            'fill': '#f8f8f8',
                            'fill-opacity': 1,
                            'font-size': 9
                        }
                    }
                }
                if (value.type == 'largeActivity') {
                    return {
                        shape: new OG.A_Task(value.value),
                        'shape-position': {
                            width: '80px',
                            height: '600px',
                            align: 'center',
                            'vertical-align': 'middle'
                        },
                        'shape-style': {
                            'fill': '#f8f8f8',
                            'fill-opacity': 1,
                            'font-size': 9
                        }
                    }
                }
                if (value.type == 'report') {
                    return {
                        shape: new OG.A_Task(value.value),
                        'shape-position': {
                            width: '100px',
                            height: '68px',
                            align: 'center',
                            'vertical-align': 'middle'
                        },
                        'shape-style': {
                            'fill': '#f8f8f8',
                            'fill-opacity': 1,
                            'font-size': 9
                        }
                    }
                }
            }

            //옵션데이터
            var options = {
                columns: [
                    {
                        data: 'activity',
                        title: '주요 Activity\n일정(D day)',
                        defaultContent: '',
                        columnWidth: 100,
                        columnStyle: {
                            'border-right': {
                                'stroke': '#616063',
                                'stroke-width': '3'
                            }
                        },
                        cellStyle: {
                            'border-right': {
                                'stroke': '#616063',
                                'stroke-width': '3'
                            },
                            'border-left': {
                                'stroke': '#abaaad',
                                'stroke-width': '1'
                            }
                        }
                    },
                    {
                        data: '90',
                        title: '견적 착수\n90',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '85',
                        title: 'IRS\n85',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '80',
                        title: 'Ref.PJT 선정',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '75',
                        title: 'HBD\n75',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '70',
                        title: 'WBD\n70',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '65',
                        title: 'P&ID\n65',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '60',
                        title: 'P&ID\n60',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '55',
                        title: 'P&ID\n55',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '50',
                        title: 'P&ID\n50',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '45',
                        title: 'P&ID\n45',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '43',
                        title: 'P&ID\n43',
                        defaultContent: '',
                        renderer: renderer
                    },
                    {
                        data: '40',
                        title: 'Plot Plan\n40',
                        defaultContent: '',
                        cellStyle: {
                            'border-right': {
                                'stroke': '#abaaad',
                                'stroke-width': '1'
                            }
                        },
                        renderer: renderer
                    }
                ]
            }

            var dataTable = new OG.DataTable();
            var data = [
                {
                    activity: 'FUNCTION',
                    '90': {text: 'CCC'}
                },
                {
                    activity: '견적 TFT / EM',
                    '90': {type: 'activity', value: 'ITB 배포'},
                    '75': {type: 'activity', value: 'Reference PJT 선정'}
                },
                {
                    activity: '성능',
                    '75': {type: 'activity', value: 'Plant Configuration'},
                    '70': {type: 'activity', value: 'Performance Guideline'},
                    '65': {type: 'activity', value: 'Plant HBD\n(보안문서)'}
                },
                {
                    activity: '프로세스',
                    '60': {type: 'doubleActivity', value: 'Utility\nConsumption\n취합'},
                    '50': {type: 'doubleActivity', value: 'P&ID\nCalculation'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '플랜트(보조기기)',
                    '55': {type: 'activity', value: 'WBD'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '플랜트(주기기)\nor STG,BLR BG',
                    '75': {type: 'activity', value: 'MPS'},
                    '70': {type: 'activity', value: 'GT data / STG\nHBD'},
                    '65': {type: 'activity', value: 'BLR / HRSG\nPerformance\nData'},
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '배관'
                },
                {
                    activity: '배치',
                    '40': {type: 'activity', value: 'Plot\nplan'}
                },
                {
                    activity: '운반',
                    '85': {type: 'largeActivity', value: 'IRS\n&\nBIGS'},
                    '80': {type: 'largeActivity', value: 'Devajtion\n&\nClarification'},
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '50': {type: 'activity', value: 'CHS & LHS\nFlowdagram'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '수처리',
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '55': {type: 'activity', value: 'Conceptual\nDesign\nCalculation'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: 'HVAC',
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: 'Fire Fighting',
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '전력',
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '계측',
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '건축',
                    '40': {type: 'activity', value: 'Building list'}
                },
                {
                    activity: '토목',
                    '90': {type: 'report', value: 'SI Report\nPhotography\nStudy'},
                    '50': {type: 'horizontalActivity', value: 'Coal Jetty Design\n Coal Storage Yard Design'}
                },
                {
                    activity: ''
                }
            ];
            dataTable.setData(data);
            canvas.drawShape([100, 100], dataTable, [100, 100], {});
            dataTable.draw();

            $('#print-table').click(function(){
                console.log(dataTable.data);
            })

            data = [
                {
                    activity: 'FUNCTION'
                },
                {
                    activity: '성능',
                    '75': {type: 'activity', value: 'Plant Configuration'},
                    '70': {type: 'activity', value: 'Performance Guideline'},
                    '65': {type: 'activity', value: 'Plant HBD\n(보안문서)'}
                },
                {
                    activity: '플랜트(보조기기)',
                    '55': {type: 'activity', value: 'WBD'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                },
                {
                    activity: '플랜트(주기기)\nor STG,BLR BG',
                    '90': {type: 'activity', value: 'MPS'},
                    '80': {type: 'activity', value: 'GT data / STG\nHBD'},
                    '65': {type: 'activity', value: 'BLR / HRSG\nPerformance\nData'},
                    '60': {type: 'activity', value: 'Utility\nConsumption'},
                    '45': {type: 'activity', value: 'Pre-requisite\ndata'}
                }
            ];

            var cell1 = dataTable.getCellFromTableIndex(1, 1);
            var cell2 = dataTable.getCellFromTableIndex(4, 1);
            var cell3 = dataTable.getCellFromTableIndex(4, 5);
//
            dataTable.connect(cell1, cell2);
            dataTable.connect(cell3, cell1);
//
//            var rect1 = canvas.drawShape([100, 100], new OG.RectangleShape(), [60, 20], {});
//            dataTable.updateCell(cell1, {type: 'activity', value: 'Plant Configuration'}, 'BBB', rect1, null, true);

//            dataTable.setData(data);
//            dataTable.setOptions(options);
//            dataTable.draw();


        });

        function save() {
            opengraphJSON = canvas.toJSON();
        }
    </script>
</head>
<body oncontextmenu="return false;">
<div class="ui-layout-north">
    <input type="button" value="printXML" onclick="console.log($.parseXML(canvas.toXML()));"/>
    <input type="button" value="printJSON" onclick="console.log(canvas.toJSON());"/>
    <input type="button" value="clear" onclick="canvas.clear();"/>
    <input type="button" value="saveJSON" onclick="save();"/>
    <input type="button" value="loadJSON" onclick="canvas.loadJSON(opengraphJSON);"/>
    <input type="button" value="undo" onclick="canvas.undo();"/>
    <input type="button" value="redo" onclick="canvas.redo();"/>
    <input type="file" value="upload" id="backdoor-upload"/>
    <input type="button" value="update" id="backdoor-update"/>
    <input type="button" value="table" id="print-table"/>
</div>
<div class="ui-layout-west">
    <div id="accordion">
        <h3><a href="#">BPMN</a></h3>

        <div id="imgGroup">
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start"
                 _width="30" _height="30"/>
            <img src="resources/images/symbol/event_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate" _width="30" _height="30"/>
            <img src="resources/images/symbol/event_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End"
                 _width="30" _height="30"/>
            <img src="resources/images/symbol/message_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Message" _width="30" _height="30"/>
            <img src="resources/images/symbol/message_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Message" _width="30" _height="30"/>
            <img src="resources/images/symbol/message_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Message" _width="30" _height="30"/><br/>
            <img src="resources/images/symbol/link_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Link" _width="30" _height="30"/>
            <img src="resources/images/symbol/link_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Link" _width="30" _height="30"/>
            <img src="resources/images/symbol/link_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Link"
                 _width="30" _height="30"/>
            <img src="resources/images/symbol/multiple_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Multiple" _width="30" _height="30"/>
            <img src="resources/images/symbol/multiple_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Multiple" _width="30" _height="30"/>
            <img src="resources/images/symbol/multiple_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Multiple" _width="30" _height="30"/><br/>
            <img src="resources/images/symbol/timer_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Timer" _width="30" _height="30"/>
            <img src="resources/images/symbol/timer_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Timer" _width="30" _height="30"/>
            <img src="resources/images/symbol/rule_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Rule" _width="30" _height="30"/>
            <img src="resources/images/symbol/rule_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Rule" _width="30" _height="30"/>
            <img src="resources/images/symbol/compensation_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Compensation" _width="30" _height="30"/>
            <img src="resources/images/symbol/compensation_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Compensation" _width="30" _height="30"/><br/>
            <img src="resources/images/symbol/error_intermediate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Error" _width="30" _height="30"/>
            <img src="resources/images/symbol/error_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Error"
                 _width="30" _height="30"/>
            <img src="resources/images/symbol/cancel_end.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Cancel" _width="30" _height="30"/>
            <img src="resources/images/symbol/event_terminate.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Terminate" _width="30" _height="30"/><br/>
            <img src="resources/images/symbol/gateway.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.G_Gateway"
                 _width="40" _height="40"/>
            <img src="resources/images/symbol/gateway_exclusive.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.G_Exclusive" _width="40" _height="40"/>
            <img src="resources/images/symbol/gateway_parallel.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.G_Parallel" _width="40" _height="40"/>
            <img src="resources/images/symbol/gateway_complex.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.G_Complex" _width="40" _height="40"/>
            <img src="resources/images/symbol/gateway_inclusive.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.G_Inclusive" _width="40" _height="40"/><br/>
            <img src="resources/images/symbol/task.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_Task"
                 _width="70" _height="50"/>
            <img src="resources/images/symbol/subprocess.png" class="icon_shape" _shape_type="GROUP"
                 _shape_id="OG.shape.bpmn.A_Subprocess" _width="200" _height="150"/>
            <img src="resources/images/symbol/data_object.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.D_Data"
                 _width="50" _height="50"/>
            <img src="resources/images/symbol/data_store.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.D_Store"
                 _width="50" _height="50"/>
            <img src="resources/images/symbol/group.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.M_Group"
                 _width="50" _height="50"/><br/>
            <img src="resources/images/symbol/connector_sequence.png" class="icon_shape" _shape_type="EDGE"
                 _shape_id="OG.shape.bpmn.C_Sequence" _width="200" _height="150"/>
            <img src="resources/images/symbol/connector_message.png" class="icon_shape" _shape_type="EDGE"
                 _shape_id="OG.shape.bpmn.C_Message" _width="200" _height="150"/>
            <img src="resources/images/symbol/connector_conditional.png" class="icon_shape" _shape_type="EDGE"
                 _shape_id="OG.shape.bpmn.C_Conditional" _width="200" _height="150"/>
            <img src="resources/images/symbol/connector_dataassociation.png" class="icon_shape" _shape_type="EDGE"
                 _shape_id="OG.shape.bpmn.C_DataAssociation" _width="200" _height="150"/>
            <img src="resources/images/symbol/connector_association.png" class="icon_shape" _shape_type="EDGE"
                 _shape_id="OG.shape.bpmn.C_Association" _width="200" _height="150"/><br/>
            <img src="resources/images/symbol/annotation.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.M_Annotation" _width="70" _height="30"/>
            <img src="resources/images/symbol/text.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.M_Text"
                 _width="50" _height="30"/>
            <img src="resources/images/symbol/horizontal_lane.png" class="icon_shape" _shape_type="GROUP"
                 _shape_id="OG.shape.HorizontalLaneShape" _width="100" _height="100"/>
            <img src="resources/images/symbol/horizontal_lane.png" class="icon_shape" _shape_type="GROUP"
                 _shape_id="OG.shape.HorizontalPoolShape" _width="100" _height="100"/>
            <img src="resources/images/symbol/vertical_lane.png" class="icon_shape" _shape_type="GROUP"
                 _shape_id="OG.shape.VerticalLaneShape" _width="100" _height="100"/>
            <img src="resources/images/symbol/vertical_lane.png" class="icon_shape" _shape_type="GROUP"
                 _shape_id="OG.shape.VerticalPoolShape" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GROUP"
                 _shape_id="OG.shape.Transformer" _width="100" _height="100"/>

            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_MapperTask" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_HumanTask" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_ManualTask" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_LoopTask" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_ServiceTask" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.A_WebServiceTask" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.ParallelMultiple" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.Signal" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.Value_Chain" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.Value_Chain_Module" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Connector" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_End_Connector" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_MessageFill" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Intermediate_Escalation" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.E_Start_Error" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.bpmn.ScopeActivity" _width="100" _height="100"/>
            <!--에센시아-->
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.Alpha" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.State" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.LevelOfDetail" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.Competency" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.Practice" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.ActivitySpace" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.Activity" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.WorkProduct" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.CompetencyLevel" _width="100" _height="100"/>
            <img src="resources/images/symbol/event_start.png" class="icon_shape" _shape_type="GEOM"
                 _shape_id="OG.shape.essencia.ActivityArrow" _width="100" _height="100"/>


        </div>
    </div>
</div>

<div class="ui-layout-center" style="cursor: default;">
    <div style="width: 90%;height: 90%;border: solid 1px #eee; overflow: scroll;" id="canvas">

    </div>
</div>
<div id="canvas_slider">
</div>

<script type="text/javascript">
    $(function () {
        $('#imgGroup').find('img').each(function (index, img) {
            var _shape_id = $(img).attr('_shape_id');
            _shape_id = _shape_id.split('.');
            _shape_id = _shape_id[_shape_id.length - 1];
            var text = $('<p>' + _shape_id + '</p>');
            var clearfix = $('<div></div>');

            $(img).after(text);
            text.after(clearfix);
            $(img).css('float', 'left');

            text.css('font-size', 10);
            text.css('float', 'left');
            clearfix.css('clear', 'both');
        });
        $('.ui-layout-west').css('overflow', 'auto');
    })
</script>
</body>
</html>